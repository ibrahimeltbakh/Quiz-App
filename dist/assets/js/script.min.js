let leavingTime;"serviceWorker"in navigator&&navigator.serviceWorker.register("../SW.js").then((e=>console.log(e))).catch((e=>console.log(e)));let timeLeft=5,hasAlerted=!1;function startCountDown(){hasAlerted||(sendNotification(`Warning! You have ${timeLeft} seconds to return before the exam closes!`),hasAlerted=!0),leavingTime=setInterval((()=>{timeLeft--,timeLeft>0?sendNotification(`You have ${timeLeft} seconds left! Return now!`):(sendNotification("Exam Closed! You did not return in time."),confirm("Exam is now closed. Click OK to exit."),window.close(),clearInterval(leavingTime))}),1e3)}function sendNotification(e){"granted"===Notification.permission?new Notification("Exam Warning",{body:e,tag:"exam-countdown"}):(console.log("Notifications blocked! Using alert instead."),alert(e))}Notification.requestPermission().then((e=>{"granted"!==e&&alert("Please allow notifications to avoid losing your exam!")})),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState?startCountDown():(clearInterval(leavingTime),timeLeft=5,hasAlerted=!1)}));let countdownInterval,questionsNumber=document.querySelector(".count span"),bulletsSpans=document.querySelector(".bullets .spans"),bullets=document.querySelector(".bullets"),quizArea=document.querySelector(".quiz-area"),answersArea=document.querySelector(".answers-area"),submitButton=document.querySelector(".submit-button"),results=document.querySelector(".results"),countdownelement=document.querySelector(".countdown"),qIndex=0,rightAnswersCounter=0;function getQuestions(){let e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===this.readyState&&200===this.status){let e=JSON.parse(this.responseText),t=e.length;creatBullets(t),addQuestiondata(e[qIndex],t),countdown(30,t),submitButton.onclick=()=>{let n=e[qIndex].right_answer;qIndex++,checkAnswer(n),quizArea.innerHTML="",answersArea.innerHTML="",addQuestiondata(e[qIndex],t),handelBullets(),clearInterval(countdownInterval),countdown(30,t),showResults(t)}}},e.open("Get","../Html_Questions.json",!0),e.send()}function creatBullets(e){questionsNumber.innerHTML=e;for(let t=0;t<e;t++){let e=document.createElement("span");0===t&&(e.className="on"),bulletsSpans.appendChild(e)}}function addQuestiondata(e,t){if(qIndex<t){let t=document.createElement("h2"),n=document.createTextNode(e.title);t.appendChild(n),quizArea.appendChild(t);for(let t=1;t<=4;t++){let n=document.createElement("div");n.className="answer";let o=document.createElement("input");o.type="radio",o.name="Questions",o.id=`answer_${t}`,o.dataset.answer=e[`answer_${t}`],1===t&&(o.checked=!0);let s=document.createElement("label");s.htmlFor=`answer_${t}`;let r=document.createTextNode(e[`answer_${t}`]);s.appendChild(r),n.appendChild(o),n.appendChild(s),answersArea.appendChild(n)}}}function checkAnswer(e){let t,n=document.getElementsByName("Questions");for(let e=0;e<n.length;e++)n[e].checked&&(t=n[e].dataset.answer);t===e&&rightAnswersCounter++}function handelBullets(){let e=document.querySelectorAll(".bullets .spans span");Array.from(e).forEach(((e,t)=>{qIndex===t&&(e.className="on")}))}function showResults(e){let t;qIndex===e&&(quizArea.remove(),answersArea.remove(),submitButton.remove(),bullets.remove(),t=rightAnswersCounter>e/2&&rightAnswersCounter<e?`<span class= "good">Good</span>, You Answerd ${rightAnswersCounter} from ${e}`:rightAnswersCounter===e?`<span class= "perfect">Perfect</span>, You Answerd ${rightAnswersCounter} from ${e}`:`<span class= "bad">Bad</span>, You Answerd ${rightAnswersCounter} from ${e}`,results.innerHTML=t)}function countdown(e,t){if(qIndex<t){let t,n;countdownInterval=setInterval((function(){t=parseInt(e/60),n=parseInt(e%60),t=t<10?`0${t}`:t,n=n<10?`0${n}`:n,countdownelement.innerHTML=`<span>${t}</span>:<span>${n}</span>`,--e<0&&(clearInterval(countdownInterval),submitButton.click())}),1e3)}}getQuestions();//# sourceMappingURL=script.min.js.map
