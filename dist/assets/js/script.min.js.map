{"version":3,"sources":["main.js"],"names":["leavingTime","navigator","serviceWorker","register","then","res","console","log","catch","err","timeLeft","hasAlerted","startCountDown","sendNotification","setInterval","confirm","window","close","clearInterval","message","Notification","permission","body","tag","alert","requestPermission","document","addEventListener","visibilityState","countdownInterval","questionsNumber","querySelector","bulletsSpans","bullets","quizArea","answersArea","submitButton","results","countdownelement","qIndex","rightAnswersCounter","getQuestions","myRequest","XMLHttpRequest","onreadystatechange","this","readyState","status","questionObject","JSON","parse","responseText","questioncount","length","creatBullets","addQuestiondata","countdown","onclick","rightAnswer","right_answer","checkAnswer","innerHTML","handelBullets","showResults","open","send","nums","i","thisQuestion","createElement","className","appendChild","obj","count","h2","qTiteleText","createTextNode","answerDiv","radio","type","name","id","dataset","answer","checked","label","htmlFor","labelText","rAnswer","theChoosenAnswer","answers","getElementsByName","querySelectorAll","Array","from","forEach","span","index","theResult","remove","duration","minutes","seconds","parseInt","click"],"mappings":"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","file":"script.min.js","sourcesContent":["// if(navigator.serviceWorker){\r\n\r\n// }\r\n\r\nif ('serviceWorker' in navigator) {\r\n  navigator.serviceWorker.register(\"../SW.js\").then((res) => console.log(res)).catch((err) => console.log(err))\r\n}\r\n// // **********************************************************\r\n// Notification.requestPermission().then((permission) => {\r\n//   if (permission === \"granted\") {\r\n//     // new Notification(\"Welcome to your Exam\", {\r\n//     //   body: \"Stay focused and do your best!\",\r\n//     //   tag: \"exam-start\"\r\n//     // })\r\n//     document.addEventListener(\"visibilitychange\", () => {\r\n//       if (document.visibilityState === \"hidden\") {\r\n//         let not = new Notification(\"Come back to your Exam\", {\r\n//           body: \"If you stay outside the exam, it will be closed!\",\r\n//           tag: \"exam\",\r\n//           renotify: true\r\n//         })\r\n//       }\r\n//     })\r\n//   }\r\n// })\r\n// ****************************************************************\r\nlet leavingTime;\r\nlet timeLeft = 5;\r\nlet hasAlerted = false;\r\n\r\nNotification.requestPermission().then((permission) => {\r\n  if (permission !== \"granted\") {\r\n    alert(\"Please allow notifications to avoid losing your exam!\");\r\n  }\r\n});\r\n\r\ndocument.addEventListener(\"visibilitychange\", () => {\r\n  if (document.visibilityState === \"hidden\") {\r\n    startCountDown();\r\n  } else {\r\n    clearInterval(leavingTime);\r\n    timeLeft = 5;\r\n    hasAlerted = false;\r\n  }\r\n});\r\n\r\nfunction startCountDown() {\r\n  if (!hasAlerted) {\r\n    sendNotification(`Warning! You have ${timeLeft} seconds to return before the exam closes!`);\r\n    hasAlerted = true;\r\n  }\r\n\r\n  leavingTime = setInterval(() => {\r\n    timeLeft--;\r\n\r\n    if (timeLeft > 0) {\r\n      sendNotification(`You have ${timeLeft} seconds left! Return now!`);\r\n    } else {\r\n      sendNotification(\"Exam Closed! You did not return in time.\");\r\n      confirm(\"Exam is now closed. Click OK to exit.\");\r\n      window.close();\r\n      clearInterval(leavingTime);\r\n    }\r\n  }, 1000);\r\n}\r\n\r\nfunction sendNotification(message) {\r\n  if (Notification.permission === \"granted\") {\r\n    new Notification(\"Exam Warning\", { body: message, tag: \"exam-countdown\" });\r\n  } else {\r\n    console.log(\"Notifications blocked! Using alert instead.\");\r\n    alert(message);\r\n  }\r\n}\r\n//*************************************************************\r\n\r\n//select Elements\r\nlet questionsNumber = document.querySelector(\".count span\");\r\nlet bulletsSpans = document.querySelector(\".bullets .spans\");\r\nlet bullets = document.querySelector(\".bullets\");\r\nlet quizArea = document.querySelector(\".quiz-area\");\r\nlet answersArea = document.querySelector(\".answers-area\");\r\nlet submitButton = document.querySelector(\".submit-button\");\r\nlet results = document.querySelector(\".results\");\r\nlet countdownelement = document.querySelector(\".countdown\");\r\n\r\nlet qIndex = 0;\r\nlet rightAnswersCounter = 0;\r\nlet countdownInterval;\r\nfunction getQuestions() {\r\n  let myRequest = new XMLHttpRequest();\r\n  myRequest.onreadystatechange = function () {\r\n    if (this.readyState === 4 && this.status === 200) {\r\n      let questionObject = JSON.parse(this.responseText);\r\n      let questioncount = questionObject.length;\r\n      //creat Bullets and Set Questions Count\r\n      creatBullets(questioncount);\r\n      //add Quetions Data\r\n      addQuestiondata(questionObject[qIndex], questioncount);\r\n      //start countdown\r\n      countdown(30, questioncount);\r\n      //when Sumbit\r\n      submitButton.onclick = () => {\r\n        //get the Right Answer\r\n        let rightAnswer = questionObject[qIndex].right_answer;\r\n        //increase index\r\n        qIndex++;\r\n        //check The Answer\r\n        checkAnswer(rightAnswer);\r\n        //remove previous question\r\n        quizArea.innerHTML = \"\";\r\n        answersArea.innerHTML = \"\";\r\n        //add new Quetions Data\r\n        addQuestiondata(questionObject[qIndex], questioncount);\r\n        //handel bullets\r\n        handelBullets();\r\n        //clear interval\r\n        clearInterval(countdownInterval);\r\n        //start countdown\r\n        countdown(30, questioncount);\r\n        //show results\r\n        showResults(questioncount);\r\n      };\r\n    }\r\n  };\r\n\r\n  myRequest.open(\"Get\", \"../Html_Questions.json\", true);\r\n  myRequest.send();\r\n}\r\ngetQuestions();\r\n\r\nfunction creatBullets(nums) {\r\n  questionsNumber.innerHTML = nums;\r\n  for (let i = 0; i < nums; i++) {\r\n    let thisQuestion = document.createElement(\"span\");\r\n    if (i === 0) {\r\n      thisQuestion.className = \"on\";\r\n    }\r\n    bulletsSpans.appendChild(thisQuestion);\r\n  }\r\n}\r\nfunction addQuestiondata(obj, count) {\r\n  if (qIndex < count) {\r\n    //creat h2 question title\r\n    let h2 = document.createElement(\"h2\");\r\n    //creat text of question title\r\n    let qTiteleText = document.createTextNode(obj[\"title\"]);\r\n    //append text to h2\r\n    h2.appendChild(qTiteleText);\r\n    //append h2 to quiz-area\r\n    quizArea.appendChild(h2);\r\n    //Creat Answers Area\r\n    for (let i = 1; i <= 4; i++) {\r\n      //creat div\r\n      let answerDiv = document.createElement(\"div\");\r\n      //div class Name\r\n      answerDiv.className = \"answer\";\r\n      //creat radio element\r\n      let radio = document.createElement(\"input\");\r\n      //radio Attributes\r\n      radio.type = \"radio\";\r\n      radio.name = \"Questions\";\r\n      radio.id = `answer_${i}`;\r\n      radio.dataset.answer = obj[`answer_${i}`];\r\n      //make first radio checked\r\n      if (i === 1) radio.checked = true;\r\n      //creat label\r\n      let label = document.createElement(\"label\");\r\n      //label Attributes\r\n      label.htmlFor = `answer_${i}`;\r\n      //creat text of label\r\n      let labelText = document.createTextNode(obj[`answer_${i}`]);\r\n      //append text to label\r\n      label.appendChild(labelText);\r\n      //append radio and label to main Div\r\n      answerDiv.appendChild(radio);\r\n      answerDiv.appendChild(label);\r\n      //append Answer Div to answersArea\r\n      answersArea.appendChild(answerDiv);\r\n    }\r\n  }\r\n}\r\nfunction checkAnswer(rAnswer) {\r\n  let answers = document.getElementsByName(\"Questions\");\r\n  let theChoosenAnswer;\r\n  for (let i = 0; i < answers.length; i++) {\r\n    if (answers[i].checked) theChoosenAnswer = answers[i].dataset.answer;\r\n  }\r\n  if (theChoosenAnswer === rAnswer) rightAnswersCounter++;\r\n}\r\nfunction handelBullets() {\r\n  let bullets = document.querySelectorAll(\".bullets .spans span\");\r\n  let arrayofBullets = Array.from(bullets);\r\n  arrayofBullets.forEach((span, index) => {\r\n    if (qIndex === index) {\r\n      span.className = \"on\";\r\n    }\r\n  });\r\n}\r\nfunction showResults(count) {\r\n  let theResult;\r\n  if (qIndex === count) {\r\n    quizArea.remove();\r\n    answersArea.remove();\r\n    submitButton.remove();\r\n    bullets.remove();\r\n    if (rightAnswersCounter > count / 2 && rightAnswersCounter < count)\r\n      theResult = `<span class= \"good\">Good</span>, You Answerd ${rightAnswersCounter} from ${count}`;\r\n    else if (rightAnswersCounter === count)\r\n      theResult = `<span class= \"perfect\">Perfect</span>, You Answerd ${rightAnswersCounter} from ${count}`;\r\n    else\r\n      theResult = `<span class= \"bad\">Bad</span>, You Answerd ${rightAnswersCounter} from ${count}`;\r\n\r\n    results.innerHTML = theResult;\r\n  }\r\n}\r\nfunction countdown(duration, count) {\r\n  if (qIndex < count) {\r\n    let minutes, seconds;\r\n    countdownInterval = setInterval(function () {\r\n      minutes = parseInt(duration / 60);\r\n      seconds = parseInt(duration % 60);\r\n\r\n      minutes = minutes < 10 ? `0${minutes}` : minutes;\r\n      seconds = seconds < 10 ? `0${seconds}` : seconds;\r\n\r\n      countdownelement.innerHTML = `<span>${minutes}</span>:<span>${seconds}</span>`;\r\n\r\n      if (--duration < 0) {\r\n        clearInterval(countdownInterval);\r\n        submitButton.click();\r\n      }\r\n    }, 1000);\r\n  }\r\n}\r\n"]}